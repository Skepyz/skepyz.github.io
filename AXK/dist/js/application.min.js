var CANARY=CANARY||{};$(function(){"use strict";CANARY.Util.init()});CANARY.Careers=function(){"use strict";var e={};var t=function(){var e=$("#careers-carousel");e.owlCarousel({"items":1,"animateOut":"fadeOut","loop":true,"mouseDrag":false,"dots":true});$(".slide-next").on("click",function(){e.trigger("next.owl.carousel")});$(".slide-prev").on("click",function(){e.trigger("prev.owl.carousel")})};var n=function(){$(window).on("load",t)};return{"init":n}}();CANARY.config={"bpSmall":600,"bpTablet":768,"bpDesktop":1024,"bpDesktopWide":1400};var dataLayer=window.dataLayer=window.dataLayer||[];$(document).on("datalayer:newsletterRequested",function(){dataLayer.push({"event":"newsletterRequested","newsLoc":"homepage_footer"})});var $socialLinks=$(".social-links .social-link");$socialLinks.click(function(e){var t=e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.network;if(!t)return;dataLayer.push({"event":"socialClickout","network":t})});$(document).ready(function(){if(!CANARY||!CANARY.config)return;var e=CANARY.config.currentLocale.split("-")[0];var t=CANARY.config.currentLocale.split("-")[1];var n=CANARY.config.currencyCode;dataLayer.push({"event":"page","country":t?t.toLowerCase():"","localeLang":e,"currencyCode":n,"userLoginState":false,"basketProducts":[]})});$(document).on("datalayer:enhancedEcommerce",function(){if(!__dataLayerProducts)return;var e=[];for(var t=0;t<__dataLayerProducts.length;t++){var n=__dataLayerProducts[t];e.push({"name":n.name,"price":n.price.toString(),"position":t+1})}__dataLayerProducts=undefined;var i=CANARY.config.currencyCode;dataLayer.push({"ecommerce":{"currencyCode":i,"impressions":e}})});$(document).on("datalayer:productDetail",function(e,t){dataLayer.push({"event":"productDetail","ecommerce":{"detail":{"products":t}}})});CANARY.Footer=function(){"use strict";var e=function(){};return{"init":e}}();CANARY.Global=function(){"use strict";var e={"is_nav_fixed":false,"is_nav_open":false},t={},n,i,a,o,r,s,l,c,u,d;n=function(){t={"$window":$(window),"$document":$(document),"$body":$("body"),"$html":$("html"),"$header":$(".header"),"$wrap":$(".wrap"),"$headerAlt":$(".header--alt"),"$viewport":$(".viewport"),"$page_overlay":$(".page-overlay"),"$nav_collapse":$(".nav-collapse"),"$nav_toggle":$(".js-nav-toggle"),"$list_group":$(".list-group"),"$list_group_el":$(".list-group__item"),"$lazy_imgs":$(".lazy"),"$feedback":$(".feedback-message"),"$forms":$(".js-submit-form"),"$ambientVideo":$(".ambient-video"),"$navNumber":$(".nav__number__link"),"$navDropdown":$(".nav__dropdown"),"$selectNav":$(".js-select-nav"),"$cookie":$(".cookie"),"$productTile":$(".product-tile-image img"),"$productsDropdownImgs":$(".nav__products-dropdown").find("img")}};r=function(){var e={"width":$(window).width(),"height":$(window).height()};return e};o={"init":function(){this.class_open="nav-open";this.class_close="nav-close";o.bind()},"bind":function(){t.$nav_toggle.on("click",o.toggleNav);t.$navNumber.on("click",o.toggleDropdown);t.$window.on("resize orientationchange",o.move).trigger("resize");t.$page_overlay.on("click",function(){if(e.is_nav_open){o.closeNav()}});t.$document.on("click",function(n){if(!e.is_nav_open){if(!t.$navNumber.is(n.target)&&!t.$page_overlay.is(n.target)&&t.$navNumber.parent().has(n.target).length===0){o.hideDropdown()}}})},"toggleDropdown":function(e){e.preventDefault();t.$navDropdown.toggle()},"showDropdown":function(){t.$navDropdown.show()},"hideDropdown":function(){t.$navDropdown.hide()},"move":function(){if(e.is_nav_open){o.closeNav()}if(CANARY.Helper.ww().width<850){t.$viewport.prepend(t.$nav_collapse)}else{t.$header.find(".container").append(t.$nav_collapse)}},"toggleNav":function(t){t.preventDefault();if(!e.is_nav_open){o.openNav()}else{o.closeNav()}},"openNav":function(){t.$body.removeClass(this.class_close).addClass(this.class_open);o.showDropdown();t.$navNumber.off();e.is_nav_open=true},"closeNav":function(){t.$body.removeClass(this.class_open).addClass(this.class_close).removeClass(this.class_close);t.$navNumber.on("click",o.toggleDropdown);e.is_nav_open=false}};a=function(){var e=t.$list_group.find(".list-group__content");e.hide();$(".is_open").addClass("active").next().show();t.$list_group_el.on("click",function(t){var n=$(this);e.hide();n.next().toggle();if(n.hasClass("active")){n.removeClass("active");n.next().hide()}else{$(".active").removeClass("active");n.addClass("active")}if(!n.is("a")){t.preventDefault()}t.preventDefault()})};i=function(){t.$lazy_imgs.unveil(null,function(){$(this).load(function(){this.classList.add("lazy-shown")})});t.$header.hover(function(){t.$productsDropdownImgs.trigger("unveil")})};s=function(){var e=t.$header.outerHeight(true);var n=t.$cookie.outerHeight(true);t.$wrap.css({"padding-top":e,"padding-bottom":n})};l=function(){var e=t.$header.find(".logo");var n=t.$nav_collapse.find(".nav__home").find("a");e.on("click",function(){n[0].click()})};c=function(){t.$productTile.on("click",function(){var e=$(this).closest(".product-tile").next(".tile__text").find(".btn--product-tile");if(e.length)e[0].click()})};u=function(){$(".redundant-link").on("click",function(){$("#"+$(this).data("url"))[0].click()})};d=function(){n();o.init();a();t.$window.on("resize",s).trigger("resize");i();if(Modernizr.touch){t.$document.on("focusin","input, textarea, select",function(){t.$header.addClass("header--unfix")}).on("focusout","input, textarea, select",function(){t.$header.removeClass("header--unfix")})}var e=new WOW({"boxClass":"wow","animateClass":"animated","offset":0,"mobile":true});e.init();t.$selectNav.selectNav();t.$cookie.cookieConsent({"locale":CANARY.config.currentLocale});t.$ambientVideo.ambientVideo();l();c();u();CANARY.Home.initVideo();CANARY.Shared.digitalRiverAffiliates.checkId()};return{"init":d}}();CANARY.Gtm=function(){"use strict";var e=function(e){if(!e.length){return}var t=e,n=t.attr("src").split("?")[0],i=document.URL.split(":")[0],a=t.data("progress"),o=t.data("seek"),r,s=false,l=false,c=false,u=false,d=false,f=false,p=false,v=false,m=0;if(n.match(/^http/)===null){n=i+":"+n}if(typeof ga==="function"){r="ua"}if(typeof _gaq!=="undefined"&&typeof _gaq.push==="function"){r="ga"}if(typeof dataLayer!=="undefined"&&typeof dataLayer.push==="function"){r="gtm"}if(window.addEventListener){window.addEventListener("message",g,false)}else{window.attachEvent("onmessage",g,false)}function h(e){switch(r){case"gtm":dataLayer.push({"event":"Vimeo","eventCategory":"Vimeo","eventAction":e,"eventLabel":n,"eventValue":undefined,"eventNonInteraction":true});break;case"ua":ga("send","event","Vimeo",e,n,undefined,{"nonInteraction":1});break;case"ga":_gaq.push(["_trackEvent","Vimeo",e,n,undefined,true]);break}}function g(e){if(e.origin.replace("https:","http:")!=="http://player.vimeo.com"||typeof r==="undefined"){return}var t=JSON.parse(e.data);switch(t.event){case"ready":w();break;case"playProgress":y(t.data);break;case"seek":if(o&&!p){h("Skipped video forward or backward");p=true}break;case"play":if(!u){h("Started video");u=true}else if(!f&&d){h("Resumed video");f=true}break;case"pause":$();break;case"finish":if(!v){h("Completed video");v=true}break}}function b(e,i){var a={"method":e};if(i){a.value=i}t[0].contentWindow.postMessage(JSON.stringify(a),n)}function w(){b("addEventListener","play");b("addEventListener","seek");b("addEventListener","pause");b("addEventListener","finish");b("addEventListener","playProgress")}function $(){if(m<99&&!d){h("Paused video");d=true}}function y(e){m=Math.round(e.percent*100);if(!a){return}var t;if(m>24&&!s){t="Played video: 25%";s=true}if(m>49&&!l){t="Played video: 50%";l=true}if(m>74&&!c){t="Played video: 75%";c=true}if(t){h(t)}}};return{"trackVimeo":e}}();CANARY.Helper=function(e){"use strict";var t,n,i,a,o;o=function(){var t="modernizr";try{e.sessionStorage.setItem(t,t);e.sessionStorage.removeItem(t);return true}catch(n){return false}};i=function(){var t=navigator.userAgent||navigator.vendor||e.opera;if(t.match(/iPhone/i)){return"ios"}else if(t.match(/Android/i)){return"android"}else{return"desktop"}};t=function(){var e=$("body").attr("class").split(/\s/),t=e[0];return t};n=function(){var t={"width":$(e).width(),"height":$(e).height()};return t};a=function(t){var n=e.location.search.substring(1);var i=n.split("&");for(var a=0;a<i.length;a++){var o=i[a].split("=");if(o[0]===t){return o[1]}}};return{"ww":n,"getPage":t,"getMobileOS":i,"getUrlQueryParam":a,"hasSessionStorage":o}}(window);CANARY.Home=function(){"use strict";var e={},t,n,i,a,o;t=function(){e={"$carousel":$("#home-carousel"),"$carouselArrows":$(".hp-hero__control__arrow"),"$carouselNext":$(".hp-hero__control__arrow.hp-hero__control__arrow--next"),"$carouselPrev":$(".hp-hero__control__arrow.hp-hero__control__arrow--prev"),"$modal":$("#canary-video"),"$modalVideo":$(".js-video-modal"),"$img_blur":$(".slide__img--blur"),"$tabs":$(".tabs"),"$overview":$(".section--home-overview")}};n=function(){e.$carousel.owlCarousel({"items":1,"animateIn":"fadeIn","animateOut":"fadeOut","dots":true,"rewind":true,"mouseDrag":false,"touchDrag":false,"autoplay":true,"autoplayHoverPause":true,"autoplayTimeout":4e3,"checkVisible":false});e.$carouselArrows.hover(function(){e.$carousel.trigger("stop.owl.autoplay")});e.$carouselPrev.on("click",function(){e.$carousel.trigger("prev.owl.carousel")});e.$carouselNext.on("click",function(){e.$carousel.trigger("next.owl.carousel")})};a=function(){$(window).on("resize",function(){var t=0,n=$(".page").width(),i=650,a=CANARY.Helper.ww().width<900?0:n/2;e.$img_blur.css("clip","rect("+t+"px, "+n+"px, "+i+"px, "+a+"px)")}).trigger("resize")};i=function(){new ModalVideo(".js-modal-btn",{"channel":"vimeo"})};o=function(){t();n();a();CANARY.Works.diagram.init()};return{"init":o,"initVideo":i}}();CANARY.Landing=function(){"use strict";var e=function(){CANARY.Works.diagram.init()};return{"init":e}}();CANARY.Membership=function(){var e=function(){var e=$(".js-membership-tabs");var t=$(".membership-price");var n=$(".memb__matrix-small-footnotes").find("a").attr("href");var i=$(".memb__matrix-row-footnotes").find("span");$(i).on("click",function(){window.location.href=n});e.find("li").on("click",function(){var n=$(this).data("membership-price");e.find("li").removeClass("is-active");$(this).addClass("is-active");t.text(n)});var a=$(".memb__matrix-row.price");var o=$(".double-label");var r=$(".double-label--complete");var s=$(".memb__matrix-basic");var l=$(".double-label--basic");a.on("mouseenter",function(e){o.hide(0);r.show(0)});s.on("mouseenter",function(){o.hide(0);l.show(0)})};return{"init":e}}();CANARY.PersonalInformation=function(){"use strict";$(document).ready(function(){if(!CANARY||!CANARY.config||CANARY.config.currentLocale!=="en-US")return;var e=$("#personal-information-btn");var t=true;$("#personal-information-input").on("change",function(){t=!t;e.prop("disabled",t)});e.on("click",function(){$("#personal-information-input-icon").remove();e.remove();alert("We have processed your do not sell request. Thank you.")})})}();CANARY.Press=function(){
// <sl:translate_json>
var e={"sl_translate":"sl_all","name":"Please enter your name.","email":"Please enter a valid email.","number":"Please enter a valid phone number.","subject":"Please enter a subject.","message":"Please enter a message."};
// </sl:translate_json>
var t=function(){$(".press-form").setupForm(e)};return{"init":t}}();CANARY.ProMonitoring=function(){"use strict";var e={},t,n,i;t=function(){e={"$carousel":$("#pro-monitoring-carousel")}};n=function(){e.$carousel.owlCarousel({"autoWidth":true,"loop":true,"margin":50,"responsive":false,"animateIn":"slideIn","animateOut":"slideOut","dots":false,"rewind":true,"mouseDrag":false,"touchDrag":false,"autoplay":true,"autoplayTimeout":5e3,"items":6,"lazyLoad":true})};i=function(){t();n()};return{"init":i}}();CANARY.Products=function(){"use strict";var e=function(){var e=$(".product-pyp__option");var t=$(".plans-compare-wide__option");var n=$(".pyp-order-recap--mobile").length?s():false;function i(e){return e.closest(".product-pyp")}function a(e,t){return i(e).find(t)}function o(e,t){e.find("td").removeClass("selected");e.find("td:nth-of-type("+t+")").addClass("selected")}function r(e,t){var n=e.data(t);i(e).find(".pyp-sub-total__price--"+t).html("").html(n)}function s(e){if(e)e.destroy();return new Waypoint.Sticky({"element":$(".pyp-order-recap")[0],"stuckClass":"pyp-order-recap--sticky"})}e.on("click",function(){var e=$(this).index()+1;o(a($(this),".plans-compare"),e);r($(this),"full-price");r($(this),"actual-price")});$(".plans-collapse").on("click",function(){var e=$(this).find("span:not(.plans-collapse__arrow)");var t=$(this).find(".plans-collapse__close").is(":visible");var i=a($(this),".plans-compare");i.find("tr:nth-child(n+7)").slideToggle().promise().done(function(){e.toggle();if(t)i[0].scrollIntoView();if(n)s(n)})});$(".product-pyp__compare").on("click",function(){var e=i($(this)).find(".product-pyp__option.selected").index()+1;var n=i($(this)).find('.product-pyp__option[data-most-popular="1"]').index()+1;o($(".plans-compare-wide").find("table"),e);t.filter(":nth-of-type("+n+")").addClass("plans-compare-wide__option--popular").find(".plans-compare-wide__popular-tag").css("display","flex");t.removeClass("selected").filter(":nth-of-type("+e+")").addClass("selected")});$(".js-product").productSelect({"cartUrl":CANARY.config.digitalRiverUrl,"pgm":CANARY.config.pgm});e.filter(".selected").click()};return{"init":e}}();CANARY.ShareStories=function(){
// <sl:translate_json>
var e={"sl_translate":"sl_all","vs_fname":"Please enter your first name.","vs_lname":"Please enter your last name.","vs_email":"Please enter a valid email.","vs_link":"Please enter a video link.","vs_desc":"Please enter a description.","vs_legal":"You must agree with the Canary Website Terms of Service to submit a video."};
// </sl:translate_json>
var t=function(){$(".stories-form").setupForm(e)};return{"init":t}}();CANARY.Shared=function(e,t){"use strict";var n={"key":"canary_pgm","isValidId":function(e){var t=parseInt(e,10);if(!isNaN(t)){return/^[0-9]{10}$/.test(t)}else{return false}},"checkId":function(){if(CANARY.Helper.hasSessionStorage()){var e=sessionStorage.getItem(this.key);if(!e){this.setId()}}},"setId":function(){var e=CANARY.Helper.getUrlQueryParam("pgm");if(!e)return;if(this.isValidId(e)){sessionStorage.setItem(this.key,parseInt(e,10))}}};return{"digitalRiverAffiliates":n}}(window,jQuery);CANARY.Uses=function(){"use strict";var e=function(){var e=$(".js-carousel");var t=$(".js-carousel-item");$(window).on("resize",function(){if(CANARY.Helper.ww().width>CANARY.config.bpDesktop){e.owlCarousel({"items":1,"animateOut":"fadeOut","mouseDrag":false,"pullDrag":false,"touchDrag":false});t.on("click",function(){var n=$(this);var i=n.data("carousel-num");t.removeClass("active");n.addClass("active");e.trigger("to.owl.carousel",[i-1,300,true])})}}).trigger("resize")};return{"init":e}}();CANARY.Util=function(){"use strict";function e(e){return e.charAt(0).toUpperCase()+e.slice(1)}function t(t){return e(t).replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}var n=function(e,t,n){var i=CANARY;t=t===undefined?"init":t;if(e!==""&&i[e]&&typeof i[e][t]==="function"){i[e][t](n)}},i=function(){var e=document.body.id;n("Helper");n("Global");$.each(document.body.className.split(/\s+/),function(i,a){var o=t(a);n(o);n(o,e)})};return{"init":i}}();CANARY.Works=function(){"use strict";var e={"is_first_callout_visible":false};var t={};var n;var i;n={"hideCallout":function(){$(".callout").addClass("fade")},"showCallout":function(){$(".callout").each(function(){var e=$(this);e.addClass("in")})},"hideFirstRollover":function(){$(".spot").eq(0).removeClass("active").popover("hide")},"showFirstRollover":function(){$(".spot").eq(0).addClass("active").popover("show");e.is_first_callout_visible=true},"show":function(){$(this).popover("show")},"hide":function(){$(this).popover("hide")},"init":function(){n.hideCallout();$("#works-anatomy").waypoint({"handler":function(e){n.showCallout()}},{"offset":"50%"})}};i=function(){n.init()};return{"init":i,"diagram":n}}();(function(e,t,n,i){"use strict";var a="ambientVideo";var o;var r={"offset":"100%","background":false,"fallbackImg":null};function s(t,n){o=this;o.element=t;o.$element=e(t);o.metadata=o.$element.data();o.options=e.extend({},r,n,o.metadata);o.init()}function l(){return{"ios":/iPad|iPhone|iPod/i.test(navigator.userAgent),"android":/Android/i.test(navigator.userAgent),"video":!!n.createElement("video").canPlayType}}s.prototype={"init":function(){var t=l().ios||l().android;o.$videoEl=o.$element.find("video");o.poster=o.$videoEl.attr("poster");o.videoEl=o.$videoEl[0];if(o.options.background){o.$element.addClass("ambient-video-background")}if(t){o.addFallbackImage()}else{o.$element.waypoint({"offset":o.options.offset,"handler":function(t){var n=e(this.element).find("video")[0];n.load();e(n).on("canplaythrough",function(){if(n.readyState>3){e(n).addClass("ambient-video-loaded");n.play()}});this.destroy()}})}},"addFallbackImage":function(){o.fallbackImage=o.options.fallbackImg||o.poster;if(!o.fallbackImage)return;if(o.options.background){o.$element.css("background-image","url("+o.fallbackImage+")")}else{var t=e("<img />");t.attr("src",o.fallbackImage);t.appendTo(o.$element).show()}o.$videoEl.remove()}};e.fn[a]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+a)){e.data(this,"plugin_"+a,new s(this,t))}})}})(jQuery,window,document);(function(e,t,n,i){"use strict";var a="anchorScroll";var o={"scrollSpeed":800,"scrollOffset":e(".header").outerHeight(true)||0};var r=e(n);function s(t,n){this.element=t;this.$element=e(t);this.options=e.extend({},o,n);this.scroll()}s.prototype={"scroll":function(){var t=this;var n=this.$element.offset().top-this.options.scrollOffset;var i=this.options.scrollTo;e("html, body").stop(true,false).animate({"scrollTop":Math.round(n)},this.options.scrollSpeed).promise().done(function(){t.update(i)})},"update":function(e){if(history.pushState){history.pushState(null,null,e)}else{location.hash=e}}};function l(t){return this.each(function(){e.data(this,"plugin_"+a,new s(this,t))})}e.fn[a]=l;function c(t){var n=e(this);var i=n.attr("href")||location.hash;var a=e(n.attr("data-anchor-scroll-target")||i&&i.replace(/.*(?=#[^\s]+$)/,""));var o=e.extend({"scrollTo":i},a.data(),n.data());if(n.is("a"))t.preventDefault();if(!a)return;l.call(a,o,this)}r.on("click","[data-anchor-scroll]",c);r.ready(function(){c()})})(jQuery,window,document);(function(e,t,n,i){"use strict";var a="cookieConsent";var o;var r={"locale":null,"expiry":365,"domain":"canary.is"};var s=["en-US","de-DE","fr-FR","en-GB","en-IE","de-CH","de-AT","en-EU","global"];var l;var c=false;var u="cookie-policy-accepted";var d=c?"cookie-policy-update-accepted":false;function f(t,n){o=this;o.element=t;o.$element=e(t);o.options=e.extend({},r,n);o.init()}f.prototype={"init":function(){if(typeof t.Cookies==="undefined"){throw new Error("must include js-cookie library")}var e=o.options.locale;var n=_.contains(s,e);if(n){var i=o.readCookie();if(i===d)return;l=!i?u:d;if(l)o.setup()}},"setup":function(){var e=l===u?".cookie__first-user":".cookie__return-user";o.$element.find(e).show();o.$element.show();o.$btn=o.$element.find(".js-cookie-btn").on("click",function(){Cookies.remove(u);o.setCookie()})},"readCookie":function(){var e;Object.keys(Cookies.get()).forEach(function(t){if(t===u||t===d)e=t});return e},"setCookie":function(e){Cookies.set(l,true,{"expires":o.options.expiry});o.$element.hide()}};e.fn[a]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+a)){e.data(this,"plugin_"+a,new f(this,t))}})}})(jQuery,window,document);(function(e,t,n,i){"use strict";var a="mailChimpForm";var o;var r={};var s;function l(t,n){o=this;o.element=t;o.$element=e(t);r={"url":null,"successMessage":"We've sent you a confirmation email.","errorMessage":"Please enter an email address.","appendElement":o.$element,"responseClass":"mc-response"};o.options=e.extend({},r,n);o.init()}l.prototype={"init":function(){var e=o.$element;var t=e.data("mailchimp-url");var n=t.replace("/post?","/post-json?").concat("&c=?");e.on("submit",function(t){t.preventDefault();o.addContainer();o.post({"url":n,"data":e.serialize()})})},"addContainer":function(){var t=e("."+o.options.responseClass);if(t.length===0){s=e("<div/>").addClass(o.options.responseClass).appendTo(o.options.appendElement)}},"post":function(t){var n=e.extend({},t,{"dataType":"jsonp"});e.ajax(n).then(o.handleResponse)},"handleResponse":function(e){var t;var n=e.result;var i=o.$element;i.addClass("has-feedback");if(n==="success"){i.removeClass("has-error").addClass("has-success");t=o.options.successMessage}else{i.removeClass("has-success").addClass("has-error");t=o.options.errorMessage}s.html(t)}};e.fn[a]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+a)){e.data(this,"plugin_"+a,new l(this,t))}})}})(jQuery,window,document);(function(e,t,n,i){"use strict";function a(e,t){return e.replace(/{([^{}]*)}/g,function(e,n){var i=t[n];return typeof i==="string"||typeof i==="number"?i:e})}function o(e,t){var n=e;if(t){if(t.locale){n+="/"+t.locale}if(t.path){n+="/"+t.path}if(t.cart){var i=[];var o;var r;_.each(t.cart,function(e){if(e.product_id){o="productID.{productID}/quantity.{quantity}";r=a(o,{"productID":e.product_id,"quantity":e.quantity});i.push(r)}if(e.pgm){o="pgm.{pgm}";r=a(o,{"pgm":e.pgm});i.push(r)}});n+="/"+i.join("/")}if(t.hash){n+="#"+t.hash}}return n}var r="productSelect";var s={};var l="selected";var c={"items":1,"animateOut":"fadeOut","mouseDrag":false,"pullDrag":false,"touchDrag":false,"dots":false};function u(t,n){this.element=t;this.$element=e(t);this.cart=[];this.jq={};this.options=e.extend({},s,n);this.storeUrl=this.options.cartUrl;this.init()}u.prototype={"init":function(){this.setJqueryMap();this.addHandlers();this.setup()},"setJqueryMap":function(){this.jq={"$cartBtn":this.$element.find(".js-add-to-cart"),"$curSelectedVariant":this.$element.find(".js-add-variant.selected"),"$gallery":this.$element.find(".js-product-gallery"),"$thumb":this.$element.find(".js-gallery-thumb"),"$membershipOption":this.$element.find(".js-membership-option"),"$selectedMembershipOption":this.$element.find(".js-membership-option.selected"),"$membershipFineprintItem":this.$element.find(".price-option--fineprint")}},"setup":function(){if(this.jq.$curSelectedVariant.length>0){this.cart[0]={"quantity":1}}if(this.jq.$selectedMembershipOption.length>0){this.cart[1]={"product_id":String(this.jq.$selectedMembershipOption.data("membership-product-id")),"quantity":1}}if(this.options.pgm){this.cart.push({"pgm":this.options.pgm})}this.updateCart(this.cart)},"addHandlers":function(){var e={"self":this};var t=this.$element.find(".js-membership-option");this.jq.$gallery.owlCarousel(c);this.jq.$thumb.on("click",e,this.updateImage);t.on("click",e,this.selectMembershipOption);t.hover(this.showMembershipFineprint,this.hideMembershipFineprint);this.$element.find(".js-add-variant:not(.swatch--unavailable)").on("click",e,this.addVariant)},"updateCart":function(e){var t=o(this.storeUrl,{"path":"buy","cart":e});this.jq.$cartBtn.attr("href",t)},"addVariant":function(t){var n=t.data.self;var i=e(this);var a=i.data("variant-product-id");var o=i.data("gallery-pos");i.addClass(l);if(i.is("[pyp]")){i.siblings(".selected").removeClass(l)}else{i.parent().siblings().find(".js-add-variant").removeClass(l)}n.triggerCarousel(o);n.cart[0]={"quantity":1};n.updateCart(n.cart)},"updateImage":function(t){t.preventDefault();var n=t.data.self;var i=e(this).data("gallery-pos");n.triggerCarousel(i)},"triggerCarousel":function(e){this.jq.$thumb.eq(e).addClass(l).siblings().removeClass(l);this.jq.$gallery.trigger("to.owl.carousel",[e,300,true])},"showMembershipFineprint":function(){var t=e(this).data("membership-option-index");var n=e(this).parent().parent().find(".price-option--fineprint");var i=n.eq(t);n.hide();i.show()},"hideMembershipFineprint":function(){var t=e(this).parent().parent();var n=t.find(".js-membership-option.selected").data("membership-option-index");var i=t.find(".price-option--fineprint");var a=i.eq(n);i.hide();a.show()},"selectMembershipOption":function(t){var n=t.data.self;var i=e(this);var a=i.data("membership-product-id");var o=i.data("membership-option-index");n.jq.$membershipOption.removeClass(l);i.addClass(l);n.jq.$membershipFineprintItem.hide().eq(o).show();if(a){n.cart[1]={"product_id":String(a),"quantity":1}}else{n.cart[1]={}}n.updateCart(n.cart)}};e.fn[r]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+r)){e.data(this,"plugin_"+r,new u(this,t))}})}})(jQuery,window,document);(function(e,t,n,i){"use strict";var a="selectNav";var o;var r={};function s(t,n){o=this;o.element=t;o.$element=e(t);o.options=e.extend({},r,n);o.init()}s.prototype={"init":function(){o.setup()},"setup":function(){o.$element.on("change",function(t){var n=e(this).val();if(n){o.goTo(n)}return false})},"goTo":function(e){t.location=e}};e.fn[a]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+a)){e.data(this,"plugin_"+a,new s(this,t))}})}})(jQuery,window,document);(function(e,t,n,i){"use strict";var a="setupForm";var o={};function r(t,n){this.$element=e(t);this.options=e.extend({},o,n);this.init()}r.prototype={"init":function(){var e=this.$element;this.setup(e)},"setup":function(t){var n=this;e(t).find(".form-control").each(function(){var t=e(this);var i=t.attr("id");t.attr("data-canary-error-message",n.options[i])});this.bind(t)},"bind":function(t){var n=e(t);n.parsley({"namespace":"data-canary-","trigger":"change","successClass":"has-success has-feedback","errorClass":"has-error has-feedback","classHandler":function(e){return e.$element.closest(".form-group")},"errorsWrapper":'<div class="feedback-message"></div>',"errorTemplate":"<span></span>"})}};e.fn[a]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+a)){e.data(this,"plugin_"+a,new r(this,t))}})}})(jQuery,window,document);(function(e){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.ModalVideo=e()}})(function(){var e,t,n;return function(){function e(t,n,i){function a(r,s){if(!n[r]){if(!t[r]){var l=typeof require=="function"&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={"exports":{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return a(n?n:e)},u,u.exports,e,t,n,i)}return n[r].exports}var o=typeof require=="function"&&require;for(var r=0;r<i.length;r++)a(i[r]);return a}return e}()({"1":[function(e,t,n){try{var i=new window.CustomEvent("test");i.preventDefault();if(i.defaultPrevented!==true){throw new Error("Could not prevent default")}}catch(a){var o=function(e,t){var n,i;t=t||{"bubbles":false,"cancelable":false,"detail":undefined};n=document.createEvent("CustomEvent");n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);i=n.preventDefault;n.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{"get":function(){return true}})}catch(e){this.defaultPrevented=true}};return n};o.prototype=window.Event.prototype;window.CustomEvent=o}},{}],"2":[function(e,t,n){"use strict";function i(e,t){if(e===undefined||e===null){throw new TypeError("Cannot convert first argument to object")}var n=Object(e);for(var i=1;i<arguments.length;i++){var a=arguments[i];if(a===undefined||a===null){continue}var o=Object.keys(Object(a));for(var r=0,s=o.length;r<s;r++){var l=o[r];var c=Object.getOwnPropertyDescriptor(a,l);if(c!==undefined&&c.enumerable){n[l]=a[l]}}}return n}function a(){if(!Object.assign){Object.defineProperty(Object,"assign",{"enumerable":false,"configurable":true,"writable":true,"value":i})}}t.exports={"assign":i,"polyfill":a}},{}],"3":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{"value":true});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();e("custom-event-polyfill");var a=e("../lib/util");function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var r=e("es6-object-assign").assign;var s={"channel":"youtube","facebook":{},"youtube":{"autoplay":1,"cc_load_policy":1,"color":null,"controls":1,"disablekb":0,"enablejsapi":0,"end":null,"fs":1,"h1":null,"iv_load_policy":1,"list":null,"listType":null,"loop":0,"modestbranding":null,"origin":null,"playlist":null,"playsinline":null,"rel":0,"showinfo":1,"start":0,"wmode":"transparent","theme":"dark","nocookie":false},"ratio":"16:9","vimeo":{"api":false,"autopause":true,"autoplay":true,"byline":true,"callback":null,"color":null,"height":null,"loop":false,"maxheight":null,"maxwidth":null,"player_id":null,"portrait":true,"title":true,"width":null,"xhtml":false},"allowFullScreen":true,"animationSpeed":300,"classNames":{"modalVideo":"modal-video","modalVideoClose":"modal-video-close","modalVideoBody":"modal-video-body","modalVideoInner":"modal-video-inner","modalVideoIframeWrap":"modal-video-movie-wrap","modalVideoCloseBtn":"modal-video-close-btn"},"aria":{"openMessage":"You just openned the modal video","dismissBtnMessage":"Close the modal by clicking here"}};var l=function(){function e(t,n){var i=this;o(this,e);var l=r({},s,n);var c=typeof t==="string"?document.querySelectorAll(t):t;var u=document.querySelector("body");var d=l.classNames;var f=l.animationSpeed;[].forEach.call(c,function(e){e.addEventListener("click",function(){var t=e.dataset.videoId;var n=e.dataset.channel||l.channel;var o=(0,a.getUniqId)();var r=i.getVideoUrl(l,n,t);var s=i.getHtml(l,r,o);(0,a.append)(u,s);var c=document.getElementById(o);var p=c.querySelector(".js-modal-video-dismiss-btn");c.focus();c.addEventListener("click",function(){(0,a.addClass)(c,d.modalVideoClose);setTimeout(function(){(0,a.remove)(c);e.focus()},f)});c.addEventListener("keydown",function(e){if(e.which===9){e.preventDefault();if(document.activeElement===c){p.focus()}else{c.setAttribute("aria-label","");c.focus()}}});p.addEventListener("click",function(){(0,a.triggerEvent)(c,"click")})})})}i(e,[{"key":"getPadding","value":function t(e){var t=e.split(":");var n=Number(t[0]);var i=Number(t[1]);var a=i*100/n;return a+"%"}},{"key":"getQueryString","value":function n(e){var t="";Object.keys(e).forEach(function(n){t+=n+"="+e[n]+"&"});return t.substr(0,t.length-1)}},{"key":"getVideoUrl","value":function l(e,t,n){if(t==="youtube"){return this.getYoutubeUrl(e.youtube,n)}else if(t==="vimeo"){return this.getVimeoUrl(e.vimeo,n)}else if(t==="facebook"){return this.getFacebookUrl(e.facebook,n)}return""}},{"key":"getVimeoUrl","value":function c(e,t){var n=this.getQueryString(e);return"//player.vimeo.com/video/"+t+"?"+n}},{"key":"getYoutubeUrl","value":function u(e,t){var n=this.getQueryString(e);if(e.nocookie===true){return"//www.youtube-nocookie.com/embed/"+t+"?"+n}return"//www.youtube.com/embed/"+t+"?"+n}},{"key":"getFacebookUrl","value":function d(e,t){return"//www.facebook.com/v2.10/plugins/video.php?href=https://www.facebook.com/facebook/videos/"+t+"&"+this.getQueryString(e)}},{"key":"getHtml","value":function f(e,t,n){var i=this.getPadding(e.ratio);var a=e.classNames;return'\n      <div class="'+a.modalVideo+'" tabindex="-1" role="dialog" aria-label="'+e.aria.openMessage+'" id="'+n+'">\n        <div class="'+a.modalVideoBody+'">\n          <div class="'+a.modalVideoInner+'">\n            <div class="'+a.modalVideoIframeWrap+'" style="padding-bottom:'+i+'">\n              <button class="'+a.modalVideoCloseBtn+' js-modal-video-dismiss-btn" aria-label="'+e.aria.dismissBtnMessage+"\"></button>\n              <iframe width='460' height='230' src=\""+t+"\" frameborder='0' allowfullscreen="+e.allowFullScreen+' tabindex="-1"/>\n            </div>\n          </div>\n        </div>\n      </div>\n    '}}]);return e}();n.default=l;t.exports=n["default"]},{"../lib/util":5,"custom-event-polyfill":1,"es6-object-assign":2}],"4":[function(e,t,n){"use strict";t.exports=e("./core/")},{"./core/":3}],"5":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{"value":true});var i=n.append=function l(e,t){var n=document.createElement("div");n.innerHTML=t;while(n.children.length>0){e.appendChild(n.children[0])}};var a=n.getUniqId=function c(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()};var o=n.remove=function u(e){if(e&&e.parentNode){e.parentNode.removeChild(e)}};var r=n.addClass=function d(e,t){if(e.classList){e.classList.add(t)}else{e.className+=" "+t}};var s=n.triggerEvent=function f(e,t,n){var i=void 0;if(window.CustomEvent){i=new CustomEvent(t,{"cancelable":true})}else{i=document.createEvent("CustomEvent");i.initCustomEvent(t,false,false,n)}e.dispatchEvent(i)}},{}]},{},[4])(4)});